<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Fleet Combat: Spaceships in Battle</title>
  <style>
    body {
      margin: 0;
      background-color: #000;
      overflow: hidden;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="battleCanvas"></canvas>
  <script>
    // Set up the canvas
    const canvas = document.getElementById("battleCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    // Handle window resize
    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });
    
    // Bullet class to represent projectiles
    class Bullet {
      constructor(x, y, angle, speed, color) {
        this.x = x;
        this.y = y;
        this.angle = angle;
        this.speed = speed;
        this.color = color;
        this.radius = 2;
      }
      update() {
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed;
      }
      isInBounds() {
        return (
          this.x >= 0 && this.x <= canvas.width &&
          this.y >= 0 && this.y <= canvas.height
        );
      }
      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
      }
    }
    
    // Spaceship class representing a ship in the fleet
    class Spaceship {
      constructor(x, y, size, color, shapeType) {
        this.x = x;
        this.y = y;
        this.size = size;
        this.color = color;
        this.shapeType = shapeType; // 'triangle', 'rectangle', or 'circle'
        this.angle = Math.random() * Math.PI * 2;
        this.speed = Math.random() * 2 + 1;
        this.bullets = [];
        this.fireCooldown = Math.floor(Math.random() * 100 + 50);
      }
      
      update() {
        // Move spaceship
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed;
        
        // Bounce off canvas edges by reflecting the angle
        if (this.x < 0 || this.x > canvas.width) {
          this.angle = Math.PI - this.angle;
        }
        if (this.y < 0 || this.y > canvas.height) {
          this.angle = -this.angle;
        }
        
        // Fire a bullet when the cooldown expires
        if (this.fireCooldown <= 0) {
          this.fireBullet();
          this.fireCooldown = Math.floor(Math.random() * 100 + 50);
        } else {
          this.fireCooldown--;
        }
        
        // Update bullets and remove those that leave the screen
        this.bullets.forEach(bullet => bullet.update());
        this.bullets = this.bullets.filter(bullet => bullet.isInBounds());
      }
      
      fireBullet() {
        const bulletSpeed = 5;
        const bullet = new Bullet(this.x, this.y, this.angle, bulletSpeed, this.color);
        this.bullets.push(bullet);
      }
      
      draw() {
        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.angle);
        ctx.fillStyle = this.color;
        
        // Draw the spaceship in a variety of shapes
        if (this.shapeType === 'triangle') {
          ctx.beginPath();
          ctx.moveTo(this.size, 0);
          ctx.lineTo(-this.size / 2, this.size / 2);
          ctx.lineTo(-this.size / 2, -this.size / 2);
          ctx.closePath();
          ctx.fill();
        } else if (this.shapeType === 'rectangle') {
          ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
        } else if (this.shapeType === 'circle') {
          ctx.beginPath();
          ctx.arc(0, 0, this.size / 2, 0, Math.PI * 2);
          ctx.fill();
        }
        ctx.restore();
        
        // Draw the bullets fired by this spaceship
        this.bullets.forEach(bullet => bullet.draw());
      }
    }
    
    // Create an array of spaceships with random positions, colors, sizes, and shapes
    const spaceships = [];
    const colors = ['red', 'blue', 'green', 'yellow', 'orange', 'purple', 'cyan'];
    const shapes = ['triangle', 'rectangle', 'circle'];
    
    for (let i = 0; i < 10; i++) {
      const x = Math.random() * canvas.width;
      const y = Math.random() * canvas.height;
      const size = Math.random() * 10 + 15;
      const color = colors[Math.floor(Math.random() * colors.length)];
      const shape = shapes[Math.floor(Math.random() * shapes.length)];
      spaceships.push(new Spaceship(x, y, size, color, shape));
    }
    
    // Main animation loop
    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      spaceships.forEach(ship => {
        ship.update();
        ship.draw();
      });
      requestAnimationFrame(animate);
    }
    
    animate();
  </script>
</body>
</html>